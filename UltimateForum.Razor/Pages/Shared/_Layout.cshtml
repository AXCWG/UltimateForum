@inject IConfiguration Config
<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - @Config["ForumName"]</title>
    <script type="importmap"></script>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true"/>
    <link rel="stylesheet" href="~/UltimateForum.Razor.styles.css" asp-append-version="true"/>
    <script>
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', ()=>{
            document.documentElement.setAttribute('data-bs-theme', (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'))
        })
        document.documentElement.setAttribute('data-bs-theme', (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'))
    </script>
    <style>
        .liquidGlass-effect {
            z-index: -100;
            backdrop-filter: blur(3px);
            filter: url(#glass-distortion);
            isolation: isolate;
            inset: 0;
            position:absolute;
            top:0;
            left: 0;
            right: 0;
            bottom: 0;
            display: block;
        }
    </style>
    
</head>
<body>
<header>
    <nav id="navbar-page" class="navbar  fixed-top  navbar-expand-sm navbar-toggleable-sm  border-bottom box-shadow mb-3">
        <div class="liquidGlass-effect"></div>
        <div class="container">
            <a class="navbar-brand" asp-area="" asp-page="/Index">@Config["ForumName"]</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                <div class="navbar-nav flex-grow-1" id="nav-view">
                    @await RenderSectionAsync("NavView", required: false)
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="container" id="root">
    <main role="main" style="max-width: 60rem"  class="pb-3 mx-auto">
        @RenderBody()
    </main>
</div>
<script>
    let r = document.getElementById('navbar-page').getBoundingClientRect();
    document.getElementById('root').style.marginTop = `calc(${r.height}px + 1rem)`;
    window.addEventListener('resize', ()=>{
        r = document.getElementById('navbar-page').getBoundingClientRect();
        document.getElementById('root').style.marginTop = `calc(${r.height}px + 1rem)`;   
    })
</script>


<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>

@await RenderSectionAsync("Scripts", required: false)

<svg style="display: none">
    <filter
        id="glass-distortion"
        x="0%"
        y="0%"
        width="100%"
        height="100%"
        filterUnits="objectBoundingBox"
    >
        <feTurbulence
            type="fractalNoise"
            baseFrequency="0.01 0.01"
            numOctaves="1"
            seed="5"
            result="turbulence"
        />
        <!-- Seeds: 14, 17,  -->

        <feComponentTransfer in="turbulence" result="mapped">
            <feFuncR type="gamma" amplitude="1" exponent="10" offset="0.5" />
            <feFuncG type="gamma" amplitude="0" exponent="1" offset="0" />
            <feFuncB type="gamma" amplitude="0" exponent="1" offset="0.5" />
        </feComponentTransfer>

        <feGaussianBlur in="turbulence" stdDeviation="3" result="softMap" />

        <feSpecularLighting
            in="softMap"
            surfaceScale="5"
            specularConstant="1"
            specularExponent="100"
            lighting-color="white"
            result="specLight"
        >
            <fePointLight x="-200" y="-200" z="300" />
        </feSpecularLighting>

        <feComposite
            in="specLight"
            operator="arithmetic"
            k1="0"
            k2="1"
            k3="1"
            k4="0"
            result="litImage"
        />

        <feDisplacementMap
            in="SourceGraphic"
            in2="softMap"
            scale="150"
            xChannelSelector="R"
            yChannelSelector="G"
        />
    </filter>
</svg>
</body>
</html>